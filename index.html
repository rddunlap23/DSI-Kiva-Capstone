<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>DSI Capstone - Kiva Microloans by rddunlap23</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">DSI Capstone - Kiva Microloans</h1>
      <h2 class="project-tagline">Exploring Why Kiva Loans Expire</h2>
      <a href="https://github.com/rddunlap23/DSI-Kiva-Capstone" class="btn">View on GitHub</a>
      <a href="https://github.com/rddunlap23/DSI-Kiva-Capstone/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/rddunlap23/DSI-Kiva-Capstone/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/gh-pages/images/kiva-loans-life.jpg?raw=true" alt="Title"></p>

<p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/gh-pages/images/Kiva-Mission.png?raw=true" alt="About-Kiva"></p>

<h2>
<a id="kiva-life-of-a-loan" class="anchor" href="#kiva-life-of-a-loan" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Kiva Life of a Loan:</h2>

<p><a href="https://www.kiva.org/about/how">Kiva Loan Lifecycle</a></p>

<p>The life of a loan generally follows the following lifecycle:</p>

<ol>
<li><p>Borrowers apply to a local Field Partner, which manages the loan on the ground. </p></li>
<li><p>Partner loans are facilitated by local nonprofits or lending institutions, which approve the borrower’s loan request. Kiva does due diligence and ongoing monitoring for each of these Field Partners.</p></li>
<li><p>Disbursal refers to when the borrower can access the money— the timing of this can vary. For most Field Partner loans, the money is pre-disbursed, so the borrower can access the funds right away. </p></li>
<li><p>Depending on the type of loan, a Field Partner or borrower uploads the loan details into the 
system. Our worldwide network of volunteers then helps to edit and translate loans before they go live on the website for lenders to crowdfund.</p></li>
<li><p>Lenders receive repayments over time, based on the given repayment schedule and the borrower’s ability to repay. The repayments go into the lenders’ Kiva accounts.</p></li>
<li><p>Lenders use repayments to fund new loans, donate or withdraw the money.</p></li>
</ol>

<h2>
<a id="business-problem" class="anchor" href="#business-problem" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Business Problem:</h2>

<p>In 2012 Kiva instituted a policy where a loan has 30 days to be crowd-funded on the site before it expires. If after 30 days the loan is not fully funded the loan is flagged as expired and any money raised is returned to the lenders. If this happens the loan and the risk is beared by the loan partner. Per <a href="https://www.kiva.org/blog/kiva/2012/08/13/qa-expiring-loans-credit-limits-and-the-evolution-of-kiva.html">Kiva's blog post</a> this was done for primarily two reasons:</p>

<ul>
<li>So that posted loans reflect the reality on the ground. If a loan is on the site for too long a borrower could already be paying back the loan. </li>
<li>To help provide a feedback loop for field partners. If a field partner's loans are expiring that is a signal to them that they are not posting loans that are in demand by lenders on the site.<br>
</li>
</ul>

<p>Kiva's mission is to connect people through lending to alleviate poverty. To maximize their impact they want to ensure that they are helping to efficiently deploy users capital to as many aspiring entrepreneurs across the globe as possible. If Kiva can decrease the number of loans that go unfunded it will help them to reach more entrepreneurs and better execute on their mission to alleviate poverty. </p>

<p>The goal of this project is to build a model that will help predict if a loan is at risk of being funded. Armed with this knowledge Kiva can either work to feature these loans more prominently on the sight or work with field partners and borrowers to better present their loans to maximize demand and increase funding. </p>

<h2>
<a id="exploring-funded-kiva-loans" class="anchor" href="#exploring-funded-kiva-loans" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Exploring Funded Kiva Loans</h2>

<p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/point%20map.png?raw=True" alt="PointMap">
<a href="https://cdn.rawgit.com/rddunlap23/DSI-Kiva-Capstone/master/assets/point_map.html">Click Here For Live Interactive Country Map</a></p>

<p>First off before jumping into exploring who has trouble getting loans funded on Kiva I want to take a moment to explore the breakdown of the loans they do make. All of the below figures are for loans made from November 29th, 2011 through August 22nd, 2016. During this period Kiva made a total of 694,202 loans for  $588,538,975. As you can see from the below plots a few things stand out. (One note is that only displaying top 25 countries by $ loaned)</p>

<ul>
<li>Considerably more loans are made to women than men. Almost 3:1</li>
<li>Agriculture, Retail, and Food are the most popular sectors making up greater than half of all dollars loaned</li>
<li>While Latin America and Sub Saharan Africa are the two regions receiving the most loans the top country is the Philippines which is in South East Asia. </li>
<li>Countries identified by the world bank as lower middle income receive the most loans with upper middle income countries coming in second. These are both ahead of countries flagged as low income. My initial guess here is that this is because the rule of law and strength of institutions make it easier to provide loans and start up a business in these countries. This is something that would definitely warrant further research to dig into. </li>
</ul>

<p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/gender_loaned.png?raw=True" alt="gender_amount">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/gender_loan_count.png?raw=True" alt="gender_count"></p>

<p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/sector_loaned.png?raw=True" alt="sector_amount">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/region_loaned.png?raw=True" alt="region_loaned">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/country_loaned.png?raw=True" alt="country_loaned">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/income_level_loaned.png?raw=True" alt="income_loaned"> </p>

<p>I want to further dig into the breakdown of the average loan size by the same demographics. A few things that stand out here:</p>

<ul>
<li>The disparity in average loan size by gender in most cases is relatively small. When you look by country where there is a larger discrepancy, with a few exceptions, it is women that are receiving the larger loans.</li>
<li>Congo stands out as the 2nd highest average loan size despite being one of the countries identified as low income by the World Bank. Digging in further retail, food, and clothing were the top sectors for the Congo though these sectors are towards the middle of the pack for Kiva overall.</li>
<li>Not surprisingly average loan size is positively correlated with income level.</li>
</ul>

<p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/sectoravg_by_gender.png?raw=True" alt="sector_gender_avg">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/regionavg_by_gender.png?raw=True" alt="region_gender_avg">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/countryavg_by_gender.png?raw=True" alt="country_gender_avg">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/income_levelavg_by_gender.png?raw=True" alt="income_gender_avg"></p>

<h2>
<a id="exploring-kiva-expired-loans" class="anchor" href="#exploring-kiva-expired-loans" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Exploring Kiva Expired Loans</h2>

<p>Now that we have a feel for the profile of the loans made we want to start exploring which types of loans are the most likely to expire before being funded. In total there were 39,975 loans that expired for a total of $57,930,375. This make up ~5.4% of all loans. Once we start subsetting the data a few things stand out. (For countries only showing top 25 countries by % loans expired) </p>

<ul>
<li>Men have a much more difficult time getting loans funded. Overall ~12% of mens loans go unfunded while women only have ~3.2% of funds expire.</li>
<li>There is a clear trend that the higher income regions have a harder time getting funded. I suspect this is because the loans are altruistic in nature people are generally biased towards helping out those they feel need it most. </li>
<li>While all regions have higher expiration rates for men South Asia and Sub-Saharan Africa's disparity is especially stark. </li>
</ul>

<p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/sector.png?raw=true" alt="sectors">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/region.png?raw=true" alt="region">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/country.png?raw=true" alt="country">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/income_level.png?raw=true" alt="income-level"></p>

<p>Given that the loan size appears to make a difference in the % of loans that go un-funded I next want to take a look at our cross sections of sector, region, country, and income level by average loan size to see if it's that individuals in these cross sections tend to ask for higher dollar loans and if that is what is in fact driving the different funding rates. </p>

<p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/sectoravg_loaned.png?raw=true" alt="sector_avg">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/regionavg_loaned.png?raw=true" alt="region_avg">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/countryavg_loaned.png?raw=true" alt="country_avg">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/income_levelavg_loaned.png?raw=True" alt="income_avg"></p>

<p>If you look at the below histograms you can see that the expired loans distribution (red) is shifted to the right for both loan supply and dollars loaned. These should both be able to help us in predicting if a loan will not be funded. </p>

<p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/loan_amount_dist.png?raw=true" alt="income-dist">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/No_Loans_dist.png?raw=True" alt="loan-supply"></p>

<p>Lastly before moving on to building the model I want to take a look at the correlation matrix for the numerical data. If there are any features strongly correlated with the funding status they will likely be good candidates for the model. A couple of observations here:</p>

<ul>
<li>Repayment term, loan amount, and number of competing loans have the strongest positive correlation with a loan going unfunded. </li>
<li>Gender and currency risk are the most strongly negatively correlated with a loan going unfunded. Given how these variables were encoded this implies being male (consistent with analysis above) and not having currency exposure (I would have guessed the opposite) make it harder to get a loan funded. </li>
</ul>

<p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/correlation_matrix.png?raw=True" alt="corr_matrix"></p>

<p>Now that I've explored the data visually and have a good sense of the breakdown across all of the different subsets/demographics I want to move on to building a model to help predict if a loan will be funded or not. There are going to be four main features that go into the model. They include:</p>

<ul>
<li>Continuous data (Loan Amount, Number of competing loans, country tourism dollars, GNI per capita, GDP growth per capita, and number of lenders) </li>
<li>Categorical data (region, country, gender, sector, income level, and activity) which will be encoded into dummy variables of 1s and 0s so that they can be included in model. </li>
<li>The one sentence headline description which will be represented using a modeling statistic called <a href="TF-IDF">https://en.wikipedia.org/wiki/Tf%E2%80%93idf</a>. TF-IDF or term frequency - inverse document frequency is a method that tracks the number of times a word appears in a document and then adjusted it down based on how many times that word appears across all documents in your corpus. This helps to highlight words that are unique and important to a given document. </li>
<li>I will use Latent Dirichlet allocation (LDA) which is a statistical model for representing a document by a set of topic weights. So instead of representing a large corpus by 50k + columns, one for each word, each document is represented by a set of topic weights (I am using 20 topics) This is an unsupervised dimensionality reduction technique. </li>
</ul>

<p>To evaluate model need to .....</p>

<p><img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/roc_curve.png?raw=True" alt="ROC_curve">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/precision_recall.png?raw=True" alt="precision_recall">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/confusion_matrix.png?raw=True" alt="confusion_matrix">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/confusion_matrix_normalized.png?raw=True" alt="confusion_normalized">
<img src="https://github.com/rddunlap23/DSI-Kiva-Capstone/blob/master/assets/feature_importance.png?raw=True" alt="feature_importance"></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/rddunlap23/DSI-Kiva-Capstone">DSI Capstone - Kiva Microloans</a> is maintained by <a href="https://github.com/rddunlap23">rddunlap23</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
